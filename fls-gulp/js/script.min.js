function slider(){document.querySelectorAll(".slider").forEach((e=>{const t=e.children[0],n=e.querySelector(".controll-main-block__dotts");for(let e=0;e<t.children.length;e++)n.insertAdjacentHTML("afterbegin",'<span class="controll-main-block__dott"></span>');setTimeout((()=>{let e=0;n.children[e].classList.add("controll-main-block__dott_active"),setInterval((()=>{n.children[e].classList.remove("controll-main-block__dott_active"),e=(e+1)%n.children.length,n.children[e].classList.add("controll-main-block__dott_active"),document.querySelector(".fraction-controll__current").innerText="0"+(e+1)}),4e3)}),0),e.dataset.fixwidth}));const e=document.querySelector(".main-block__slider"),t=e.querySelector(".main-block__wrapper");[...t.children].forEach((t=>{t.style.width=e.clientWidth+"px"})),t.style.width=t.children.length*t.clientWidth+"px",window.addEventListener("resize",(()=>{[...t.children].forEach((t=>{t.style.width=e.clientWidth+"px"})),t.style.width=t.children.length*e.clientWidth+"px"}));document.querySelectorAll(".controll-main-block__dotts")}function formRating(){const e=document.querySelectorAll(".rating");e.length>0&&function(){let t,n;for(let t=0;t<e.length;t++){o(e[t])}function o(e){s(e),l(),e.classList.contains("rating_set")&&r(e)}function s(e){t=e.querySelector(".rating__active"),n=e.querySelector(".rating__value")}function l(e=n.innerHTML){const o=e/.05;t.style.width=`${o}%`}function r(e){const t=e.querySelectorAll(".rating__item");for(let o=0;o<t.length;o++){const r=t[o];r.addEventListener("mouseenter",(function(t){s(e),l(r.value)})),r.addEventListener("mouseleave",(function(e){l()})),r.addEventListener("click",(function(t){s(e),e.dataset.ajax?i(r.value,e):(n.innerHTML=o+1,l())}))}}async function i(e,t){if(!t.classList.contains("rating_sending")){t.classList.add("rating_sending");let e=await fetch("rating.json",{method:"GET"});if(e.ok){const o=(await e.json()).newRating;n.innerHTML=o,l(),t.classList.remove("rating_sending")}else alert("Ошибка"),t.classList.remove("rating_sending")}}}()}function documentActions(e){const t=e.target;if(t.closest("[data-parent]")){const n=t.dataset.parent,o=document.querySelector(`[data-submenu="${n}"]`);o!==document.querySelector("._sub-menu-open")&&(document.querySelector("._sub-menu-active")?.classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")?.classList.remove("_sub-menu-open"),document.documentElement?.classList.remove("sub-menu-open")),document.documentElement.classList.toggle("sub-menu-open"),t.classList.toggle("_sub-menu-active"),o.classList.toggle("_sub-menu-open");const s=o.querySelectorAll(".sub-menu-catalog__category").length;o.style.gridTemplateColumns=`repeat(${s}, minmax(auto,20rem))`,e.preventDefault()}t.closest(".menu-top-header__link_catalog")&&(document.documentElement.classList.add("catalog-open"),e.preventDefault()),t.closest(".menu-catalog__back")&&(document.querySelector(".menu-catalog").style.cssText="left:-100%;",document.querySelector(".sub-menu-catalog").style.cssText="left:-100%;",setTimeout((()=>{document.querySelector(".menu-catalog").style.cssText="",document.querySelector(".sub-menu-catalog").style.cssText="",document.documentElement.classList.remove("catalog-open"),document.documentElement.classList.remove("sub-catalog-open"),document.querySelector("._sub-menu-active")?.classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")?.classList.remove("_sub-menu-open"),document.documentElement?.classList.remove("sub-menu-open")}),300),e.preventDefault())}function spollerActions(){let e=(e,t=500,n=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!n,!n&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!n&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},t=(t,n=500)=>t.hidden?((e,t=500,n=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,n&&e.style.removeProperty("height");let o=e.offsetHeight;e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}})(t,n):e(t,n);!function(){const n=document.querySelectorAll("[data-spollers]");if(n.length>0){const r=Array.from(n).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));r.length&&o(r);let i=function(e,t){const n=Array.from(e).filter((function(e,n,o){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(n.length){const e=[];n.forEach((n=>{const o={},s=n.dataset[t].split(",");o.value=s[0],o.type=s[1]?s[1].trim():"max",o.item=n,e.push(o)}));let o=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));o=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}(o);const s=[];if(o.length)return o.forEach((t=>{const n=t.split(","),o=n[1],l=n[2],r=window.matchMedia(n[0]),i=e.filter((function(e){if(e.value===o&&e.type===l)return!0}));s.push({itemsArray:i,matchMedia:r})})),s}}(n,"spollers");function o(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),s(e),e.addEventListener("click",l)):(e.classList.remove("_spoller-init"),s(e,!1),e.removeEventListener("click",l))}))}function s(e,t=!0){let n=e.querySelectorAll("[data-spoller]");n.length&&(n=Array.from(n).filter((t=>t.closest("[data-spollers]")===e)),n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_spoller-active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})))}function l(n){const o=n.target;if(o.closest("[data-spoller]")){const s=o.closest("[data-spoller]"),l=s.closest("[data-spollers]"),r=l.hasAttribute("data-one-spoller"),i=l.dataset.spollersSpeed?parseInt(l.dataset.spollersSpeed):500;l.querySelectorAll("._slide").length||(r&&!s.classList.contains("_spoller-active")&&function(t){const n=t.querySelector("[data-spoller]._spoller-active"),o=t.dataset.spollersSpeed?parseInt(t.dataset.spollersSpeed):500;n&&!t.querySelectorAll("._slide").length&&(n.classList.remove("_spoller-active"),e(n.nextElementSibling,o))}(l),s.classList.toggle("_spoller-active"),t(s.nextElementSibling,i)),n.preventDefault()}}i&&i.length&&i.forEach((e=>{e.matchMedia.addEventListener("change",(function(){o(e.itemsArray,e.matchMedia)})),o(e.itemsArray,e.matchMedia)}));const a=document.querySelectorAll("[data-spoller-close]");a.length&&document.addEventListener("click",(function(t){t.target.closest("[data-spollers]")||a.forEach((t=>{const n=t.closest("[data-spollers]"),o=n.dataset.spollersSpeed?parseInt(n.dataset.spollersSpeed):500;t.classList.remove("_spoller-active"),e(t.nextElementSibling,o)}))}))}}()}function adaptiveMenu(e,t,n,o){const s=document.querySelector(`${e}`),l=s.parentElement,r=document.querySelector(`${t}`);o="number"==typeof o?o:r.children.length+1,innerWidth<n?o<=r.children.length?r.insertBefore(s,r.children[o-1]):r.insertBefore(s,r.children[r.children.length-1]):l.appendChild(s),matchMedia("(max-width:"+n+"px)").addEventListener("change",(e=>{e.matches?o<=r.children.length?r.insertBefore(s,r.children[o-1]):r.appendChild(s):l.appendChild(s)}))}document.addEventListener("DOMContentLoaded",(()=>{const e=[document.querySelector("[data-spoller]")],t=["height:0;overflow:hidden;padding-top:0;padding-bottom:0;transition:all 0.5s ease;z-index:1;","overflow:hidden;height: 100px;transition:all 0.5s ease;z-index:99;"];e.forEach((e=>{let n=0;e.nextElementSibling.style.cssText="height:0;overflow:hidden;padding-top:0;padding-bottom:0;",e.addEventListener("click",(()=>{e.classList.toggle("_active-spoiler"),n=Math.abs(n-1),e.nextElementSibling.style.cssText=t[n]}))})),slider()})),document.addEventListener("click",documentActions),document.querySelector(".menu__icon").addEventListener("click",(()=>{document.querySelector(".menu").classList.toggle("menu-open"),document.documentElement.classList.remove("catalog-open"),document.querySelector("._sub-menu-active")?.classList.remove("_sub-menu-active"),document.querySelector("._sub-menu-open")?.classList.remove("_sub-menu-open")})),adaptiveMenu(".menu-top-header__list",".menu__body",991.98),adaptiveMenu(".actions-header__phones",".top-header__container",991.98,1),adaptiveMenu(".actions-header__favorite",".top-header__container",991.98,4),adaptiveMenu(".actions-header__cart",".top-header__container",991.98,5),adaptiveMenu(".body-header__search",".catalog-header__container",479.98),adaptiveMenu(".body-header__actions",".catalog-header__container",479.98),spollerActions(),formRating();